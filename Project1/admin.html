Try AI directly in your favorite apps … Use Gemini to generate drafts and refine content, plus get Gemini Pro with access to Google's next-gen AI for MYR 97.99 MYR 0 for 1 month
<?php
include 'db_connect.php';

// Calculate metrics from database
$total_revenue = 0;
$books_sold = 0;
$avg_order_value = 0;

// Total Revenue and Books Sold (last 30 days)
$revenue_sql = "SELECT SUM(b.Price * o.Quantity) as total_revenue, SUM(o.Quantity) as books_sold 
                FROM `order` o 
                JOIN book b ON o.BookID = b.BookID 
                WHERE o.order_date >= DATE_SUB(CURDATE(), INTERVAL 30 DAY) 
                AND o.Status != 'cancelled'";
$revenue_result = $conn->query($revenue_sql);
if ($revenue_result->num_rows > 0) {
    $row = $revenue_result->fetch_assoc();
    $total_revenue = $row['total_revenue'] ? $row['total_revenue'] : 0;
    $books_sold = $row['books_sold'] ? $row['books_sold'] : 0;
}

// Average Order Value (last 30 days)
$avg_sql = "SELECT AVG(b.Price * o.Quantity) as avg_order_value 
            FROM `order` o 
            JOIN book b ON o.BookID = b.BookID 
            WHERE o.order_date >= DATE_SUB(CURDATE(), INTERVAL 30 DAY) 
            AND o.Status != 'cancelled'";
$avg_result = $conn->query($avg_sql);
if ($avg_result->num_rows > 0) {
    $row = $avg_result->fetch_assoc();
    $avg_order_value = $row['avg_order_value'] ? round($row['avg_order_value'], 2) : 0;
}

// Sales data for chart (last 30 days)
$sales_data = array_fill(0, 30, 0);
$sales_labels = [];

// Generate labels for last 30 days
for ($i = 29; $i >= 0; $i--) {
    $sales_labels[] = date('M j', strtotime("-$i days"));
}

// Get daily sales data
$chart_sql = "SELECT DATE(o.order_date) as sale_date, SUM(b.Price * o.Quantity) as daily_revenue
              FROM `order` o 
              JOIN book b ON o.BookID = b.BookID 
              WHERE o.order_date >= DATE_SUB(CURDATE(), INTERVAL 30 DAY) 
              AND o.Status != 'cancelled'
              GROUP BY DATE(o.order_date) 
              ORDER BY sale_date";
$chart_result = $conn->query($chart_sql);

if ($chart_result->num_rows > 0) {
    while($row = $chart_result->fetch_assoc()) {
        $date_index = array_search(date('M j', strtotime($row['sale_date'])), $sales_labels);
        if ($date_index !== false) {
            $sales_data[$date_index] = $row['daily_revenue'];
        }
    }
}

// Analytics Data - Sales by Category
$category_data = [];
$category_labels = [];
$category_colors = ['#3b82f6', '#10b981', '#8b5cf6', '#f59e0b', '#ef4444', '#6b7280'];

$category_sql = "SELECT b.Category, SUM(b.Price * o.Quantity) as category_revenue, 
                        SUM(o.Quantity) as category_quantity
                 FROM `order` o 
                 JOIN book b ON o.BookID = b.BookID 
                 WHERE o.order_date >= DATE_SUB(CURDATE(), INTERVAL 30 DAY) 
                 AND o.Status != 'cancelled'
                 GROUP BY b.Category 
                 ORDER BY category_revenue DESC";
$category_result = $conn->query($category_sql);

if ($category_result->num_rows > 0) {
    while($row = $category_result->fetch_assoc()) {
        $category_labels[] = $row['Category'] ? $row['Category'] : 'Uncategorized';
        $category_data[] = $row['category_revenue'];
    }
} else {
    // Default data if no categories found
    $category_labels = ['Fiction', 'Non-Fiction', 'Academic', 'Children'];
    $category_data = [35, 25, 20, 15];
}

// Top Selling Books for Analytics
$top_books_sql = "SELECT b.Name, b.Category, SUM(o.Quantity) as total_sold,
                         SUM(b.Price * o.Quantity) as total_revenue
                  FROM `order` o 
                  JOIN book b ON o.BookID = b.BookID 
                  WHERE o.order_date >= DATE_SUB(CURDATE(), INTERVAL 30 DAY) 
                  AND o.Status != 'cancelled'
                  GROUP BY b.BookID, b.Name, b.Category
                  ORDER BY total_sold DESC 
                  LIMIT 5";
$top_books_result = $conn->query($top_books_sql);

// Inventory Status
$inventory_sql = "SELECT 
                    COUNT(*) as total_books,
                    SUM(Quantity) as total_stock,
                    SUM(CASE WHEN Quantity = 0 THEN 1 ELSE 0 END) as out_of_stock,
                    SUM(CASE WHEN Quantity < 10 THEN 1 ELSE 0 END) as low_stock
                  FROM book";
$inventory_result = $conn->query($inventory_sql);
$inventory_data = $inventory_result->fetch_assoc();
?>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Reports</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .dropdown-menu {
            visibility: hidden;
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            display: block;
            pointer-events: none;
        }
        .dropdown:hover .dropdown-menu {
            visibility: visible;
            opacity: 1;
            transform: translateY(0);
            pointer-events: auto;
        }
        .dropdown:hover .fa-chevron-down {
            transform: rotate(180deg);
        }
        .status-pill {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .search-box:focus-within {
            border-color: #3b82f6;
        }
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 10px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.2);
        }
        .chart-container {
            position: relative;
            height: 300px;
            width: 100%;
        }
        .status-pending { background-color: #fef3c7; color: #d97706; }
        .status-completed { background-color: #d1fae5; color: #065f46; }
        .status-shipped { background-color: #dbeafe; color: #1e40af; }
        .status-cancelled { background-color: #fee2e2; color: #dc2626; }
    </style>
</head>
<body class="bg-gray-50 font-sans">
    <!-- Top Announcement Bar -->
    <div class="bg-blue-800 text-white text-center py-2 px-4 text-sm">
        Admin Portal | Book Heaven Reporting System
    </div>

    <!-- Header -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <div class="container mx-auto px-4">
            <!-- Top Header -->
            <div class="flex items-center justify-between py-4 border-b">
                <!-- Logo -->
                <div class="flex items-center">
                    <a href="#">
                        <span class="text-2xl font-bold text-blue-800">Book Heaven</span>
                        <span class="text-xs text-gray-600 block">Admin Reports</span>
                    </a>
                </div>

                <!-- User Actions -->
                <div class="flex items-center space-x-4">
                    <div class="dropdown relative">
                        <button class="flex items-center text-gray-700 hover:text-blue-600">
                            <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="User" class="h-8 w-8 rounded-full mr-2">
                            <span>Admin User</span>
                            <i class="fas fa-chevron-down ml-1 text-xs transition-transform duration-200"></i>
                        </button>
                        <div class="dropdown-menu absolute right-0 bg-white shadow-lg rounded mt-2 py-2 w-48 z-50">
                            <a href="#" class="block px-4 py-2 hover:bg-gray-100 transition-colors duration-150">
                                <i class="fas fa-sign-out-alt mr-2 text-gray-600"></i>Logout
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Navigation -->
            <nav class="hidden md:block">
                <ul class="flex items-center space-x-6 py-3">
                    <li class="tab-link active" data-tab="reports">
                        <a href="#" class="text-blue-600 font-medium border-b-2 border-blue-600 pb-1">Reports</a>
                    </li>
                    <li class="tab-link" data-tab="analytics">
                        <a href="#" class="text-gray-800 hover:text-blue-600 font-medium">Analytics</a>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <!-- Reports Tab -->
        <div id="reports-tab" class="tab-content active">
            <div class="flex justify-between items-center mb-6">
                <h1 class="text-2xl font-bold text-gray-800">Report Generation</h1>
                <div class="flex space-x-2">
                    <div class="relative">
                        <input type="text" placeholder="Search reports..." class="pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                    </div>
                    <button class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                        <i class="fas fa-plus mr-2"></i>New Report
                    </button>
                </div>
            </div>

            <!-- Report Filters -->
            <div class="bg-white rounded-lg shadow-sm overflow-hidden mb-8">
                <div class="px-6 py-4 border-b">
                    <h2 class="text-lg font-medium text-gray-800">Report Parameters</h2>
                </div>
                <div class="p-6 grid grid-cols-1 md:grid-cols-4 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Date Range</label>
                        <select class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option>Last 7 days</option>
                            <option selected>Last 30 days</option>
                            <option>Last 90 days</option>
                            <option>Year to date</option>
                            <option>Custom range</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Report Type</label>
                        <select class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option selected>Sales Summary</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Category</label>
                        <select class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option>All Categories</option>
                            <option>Fiction</option>
                            <option>Non-Fiction</option>
                            <option>Academic</option>
                            <option>Children's Books</option>
                        </select>
                    </div>
                    <div class="flex items-end">
                        <button class="w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700">
                            Generate Report
                        </button>
                    </div>
                </div>
            </div>

            <!-- Report Summary -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="bg-white p-6 rounded-lg shadow-sm border-l-4 border-blue-500">
                    <div class="flex justify-between items-start">
                        <div>
                            <p class="text-gray-600 text-sm">Total Revenue</p>
                            <h3 class="text-2xl font-bold text-gray-800">RM<?php echo number_format($total_revenue, 2); ?></h3>
                        </div>
                        <div class="bg-blue-100 p-3 rounded-full">
                            <i class="fas fa-dollar-sign text-blue-600"></i>
                        </div>
                    </div>
                    <p class="text-xs text-gray-500 mt-2">Last 30 days</p>
                </div>

                <div class="bg-white p-6 rounded-lg shadow-sm border-l-4 border-green-500">
                    <div class="flex justify-between items-start">
                        <div>
                            <p class="text-gray-600 text-sm">Books Sold</p>
                            <h3 class="text-2xl font-bold text-gray-800"><?php echo number_format($books_sold); ?></h3>
                        </div>
                        <div class="bg-green-100 p-3 rounded-full">
                            <i class="fas fa-book text-green-600"></i>
                        </div>
                    </div>
                    <p class="text-xs text-gray-500 mt-2">Last 30 days</p>
                </div>

                <div class="bg-white p-6 rounded-lg shadow-sm border-l-4 border-yellow-500">
                    <div class="flex justify-between items-start">
                        <div>
                            <p class="text-gray-600 text-sm">Avg. Order Value</p>
                            <h3 class="text-2xl font-bold text-gray-800">RM<?php echo number_format($avg_order_value, 2); ?></h3>
                        </div>
                        <div class="bg-yellow-100 p-3 rounded-full">
                            <i class="fas fa-shopping-cart text-yellow-600"></i>
                        </div>
                    </div>
                    <p class="text-xs text-gray-500 mt-2">Last 30 days</p>
                </div>
            </div>

            <!-- Sales Chart -->
            <div class="bg-white rounded-lg shadow-sm overflow-hidden mb-8">
                <div class="px-6 py-4 border-b flex justify-between items-center">
                    <h2 class="text-lg font-medium text-gray-800">Sales Performance (Last 30 Days)</h2>
                    <div class="flex space-x-2">
                        <button class="px-3 py-1 text-xs bg-blue-100 text-blue-800 rounded">7D</button>
                        <button class="px-3 py-1 text-xs bg-blue-600 text-white rounded">30D</button>
                        <button class="px-3 py-1 text-xs bg-blue-100 text-blue-800 rounded">90D</button>
                    </div>
                </div>
                <div class="p-6">
                    <div class="chart-container">
                        <canvas id="salesChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Orders Table -->
            <div class="bg-white rounded-lg shadow-sm overflow-hidden mb-8">
                <div class="px-6 py-4 border-b">
                    <h2 class="text-lg font-medium text-gray-800">Recent Orders</h2>
                </div>
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">OrderID</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">BookID</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Address</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Quantity</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Customer_ID</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-200">
                            <?php
                            // Fetch orders from database
                            $sql = "SELECT * FROM `order` ORDER BY order_date DESC LIMIT 10";
                            $result = $conn->query($sql);
                            
                            if ($result->num_rows > 0) {
                                while($row = $result->fetch_assoc()) {
                                    $status_class = "";
                                    switch(strtolower($row["Status"])) {
                                        case "pending": $status_class = "status-pending"; break;
                                        case "completed": $status_class = "status-completed"; break;
                                        case "shipped": $status_class = "status-shipped"; break;
                                        case "cancelled": $status_class = "status-cancelled"; break;
                                        default: $status_class = "status-pending";
                                    }
                                    
                                    echo "<tr>";
                                    echo "<td class='px-6 py-4 whitespace-nowrap text-sm text-gray-900'>" . $row["OrderID"] . "</td>";
                                    echo "<td class='px-6 py-4 whitespace-nowrap text-sm text-gray-900'>" . $row["BookID"] . "</td>";
                                    echo "<td class='px-6 py-4 whitespace-nowrap text-sm text-gray-900'>" . $row["order_date"] . "</td>";
                                    echo "<td class='px-6 py-4 whitespace-nowrap text-sm text-gray-900 truncate max-w-xs'>" . $row["address"] . "</td>";
                                    echo "<td class='px-6 py-4 whitespace-nowrap text-sm text-gray-900'>" . $row["Quantity"] . "</td>";
                                    echo "<td class='px-6 py-4 whitespace-nowrap text-sm text-gray-900'>" . $row["User_ID"] . "</td>";
                                    echo "<td class='px-6 py-4 whitespace-nowrap'><span class='status-pill $status_class'>" . $row["Status"] . "</span></td>";
                                    echo "</tr>";
                                }
                            } else {
                                echo "<tr><td colspan='7' class='px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-center'>No orders found</td></tr>";
                            }
                            ?>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Report Actions -->
            <div class="bg-white rounded-lg shadow-sm overflow-hidden mb-8">
                <div class="px-6 py-4 border-b">
                    <h2 class="text-lg font-medium text-gray-800">Report Actions</h2>
                </div>
                <div class="p-6 grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="bg-blue-50 p-4 rounded-lg text-center">
                        <div class="bg-blue-100 p-3 rounded-full inline-flex mb-3">
                            <i class="fas fa-file-pdf text-blue-600 text-2xl"></i>
                        </div>
                        <h3 class="font-medium text-blue-800 mb-1">Export as PDF</h3>
                        <p class="text-sm text-blue-600 mb-3">Download a printable PDF version of this report</p>
                        <button class="bg-blue-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-blue-700">
                            Download PDF
                        </button>
                    </div>

                    <div class="bg-green-50 p-4 rounded-lg text-center">
                        <div class="bg-green-100 p-3 rounded-full inline-flex mb-3">
                            <i class="fas fa-file-excel text-green-600 text-2xl"></i>
                        </div>
                        <h3 class="font-medium text-green-800 mb-1">Export as Excel</h3>
                        <p class="text-sm text-green-600 mb-3">Download an Excel spreadsheet for further analysis</p>
                        <button class="bg-green-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-green-700">
                            Download Excel
                        </button>
                    </div>

                    <div class="bg-purple-50 p-4 rounded-lg text-center">
                        <div class="bg-purple-100 p-3 rounded-full inline-flex mb-3">
                            <i class="fas fa-share-alt text-purple-600 text-2xl"></i>
                        </div>
                        <h3 class="font-medium text-purple-800 mb-1">Share Report</h3>
                        <p class="text-sm text-purple-600 mb-3">Share this report with other team members</p>
                        <button class="bg-purple-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-purple-700">
                            Share Now
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Analytics Tab -->
        <div id="analytics-tab" class="tab-content">
            <div class="flex justify-between items-center mb-6">
                <h1 class="text-2xl font-bold text-gray-800">Sales Analytics</h1>
                <div class="flex space-x-2">
                    <div class="relative">
                        <input type="text" placeholder="Search analytics..." class="pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                    </div>
                    <button class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                        <i class="fas fa-download mr-2"></i>Export Data
                    </button>
                </div>
            </div>

            <!-- Analytics Charts - Single Chart Now -->
            <div class="grid grid-cols-1 gap-6 mb-8">
                <div class="bg-white rounded-lg shadow-sm overflow-hidden">
                    <div class="px-6 py-4 border-b">
                        <h2 class="text-lg font-medium text-gray-800">Sales by Category (Last 30 Days)</h2>
                    </div>
                    <div class="p-6">
                        <div class="chart-container">
                            <canvas id="categoryChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Top Selling Books -->
            <div class="bg-white rounded-lg shadow-sm overflow-hidden mb-8">
                <div class="px-6 py-4 border-b">
                    <h2 class="text-lg font-medium text-gray-800">Top Selling Books (Last 30 Days)</h2>
                </div>
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Book Name</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Category</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Units Sold</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Revenue</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-200">
                            <?php
                            if ($top_books_result->num_rows > 0) {
                                while($row = $top_books_result->fetch_assoc()) {
                                    echo "<tr>";
                                    echo "<td class='px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900'>" . $row["Name"] . "</td>";
                                    echo "<td class='px-6 py-4 whitespace-nowrap text-sm text-gray-500'>" . $row["Category"] . "</td>";
                                    echo "<td class='px-6 py-4 whitespace-nowrap text-sm text-gray-900'>" . $row["total_sold"] . "</td>";
                                    echo "<td class='px-6 py-4 whitespace-nowrap text-sm text-gray-900'>RM" . number_format($row["total_revenue"], 2) . "</td>";
                                    echo "</tr>";
                                }
                            } else {
                                echo "<tr><td colspan='4' class='px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-center'>No sales data found</td></tr>";
                            }
                            ?>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Performance Metrics -->
            <div class="bg-white rounded-lg shadow-sm overflow-hidden mb-8">
                <div class="px-6 py-4 border-b">
                    <h2 class="text-lg font-medium text-gray-800">Performance Metrics</h2>
                </div>
                <div class="p-6 grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="bg-green-50 p-4 rounded-lg">
                        <div class="flex items-center justify-between mb-2">
                            <h3 class="font-medium text-green-800">Average Order Value</h3>
                            <i class="fas fa-shopping-cart text-green-600"></i>
                        </div>
                        <p class="text-2xl font-bold text-green-800">RM<?php echo number_format($avg_order_value, 2); ?></p>
                        <p class="text-sm text-green-600">Last 30 days</p>
                    </div>

                    <div class="bg-purple-50 p-4 rounded-lg">
                        <div class="flex items-center justify-between mb-2">
                            <h3 class="font-medium text-purple-800">Total Books Sold</h3>
                            <i class="fas fa-book text-purple-600"></i>
                        </div>
                        <p class="text-2xl font-bold text-purple-800"><?php echo number_format($books_sold); ?></p>
                        <p class="text-sm text-purple-600">Last 30 days</p>
                    </div>

                    <div class="bg-blue-50 p-4 rounded-lg">
                        <div class="flex items-center justify-between mb-2">
                            <h3 class="font-medium text-blue-800">Total Revenue</h3>
                            <i class="fas fa-dollar-sign text-blue-600"></i>
                        </div>
                        <p class="text-2xl font-bold text-blue-800">RM<?php echo number_format($total_revenue, 2); ?></p>
                        <p class="text-sm text-blue-600">Last 30 days</p>
                    </div>
                </div>
            </div>

            <!-- Inventory Status -->
            <div class="bg-white rounded-lg shadow-sm overflow-hidden mb-8">
                <div class="px-6 py-4 border-b">
                    <h2 class="text-lg font-medium text-gray-800">Inventory Status</h2>
                </div>
                <div class="p-6 grid grid-cols-1 md:grid-cols-4 gap-6">
                    <div class="text-center">
                        <div class="bg-blue-100 p-4 rounded-full inline-flex mb-3">
                            <i class="fas fa-book text-blue-600 text-2xl"></i>
                        </div>
                        <h3 class="font-medium text-blue-800">Total Books</h3>
                        <p class="text-2xl font-bold text-blue-800"><?php echo $inventory_data['total_books']; ?></p>
                    </div>

                    <div class="text-center">
                        <div class="bg-green-100 p-4 rounded-full inline-flex mb-3">
                            <i class="fas fa-boxes text-green-600 text-2xl"></i>
                        </div>
                        <h3 class="font-medium text-green-800">Total Stock</h3>
                        <p class="text-2xl font-bold text-green-800"><?php echo $inventory_data['total_stock']; ?></p>
                    </div>

                    <div class="text-center">
                        <div class="bg-yellow-100 p-4 rounded-full inline-flex mb-3">
                            <i class="fas fa-exclamation-triangle text-yellow-600 text-2xl"></i>
                        </div>
                        <h3 class="font-medium text-yellow-800">Low Stock</h3>
                        <p class="text-2xl font-bold text-yellow-800"><?php echo $inventory_data['low_stock']; ?></p>
                    </div>

                    <div class="text-center">
                        <div class="bg-red-100 p-4 rounded-full inline-flex mb-3">
                            <i class="fas fa-times-circle text-red-600 text-2xl"></i>
                        </div>
                        <h3 class="font-medium text-red-800">Out of Stock</h3>
                        <p class="text-2xl font-bold text-red-800"><?php echo $inventory_data['out_of_stock']; ?></p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white pt-12 pb-6">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-8">
                <!-- About -->
                <div>
                    <h3 class="text-xl font-bold mb-4">About Book Heaven</h3>
                    <p class="text-gray-400 mb-4">We're passionate about books and committed to bringing you the best selection of titles from around the world.</p>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-400 hover:text-white">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white">
                            <i class="fab fa-youtube"></i>
                        </a>
                    </div>  
                </div>
                
                <!-- Quick Links -->
                <div>
                    <h3 class="text-xl font-bold mb-4">Quick Links</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-white">Home</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">New Releases</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">Bestsellers</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">Promotions</a></li>
                    </ul>
                </div>
                
                <!-- Customer Service -->
                <div>
                    <h3 class="text-xl font-bold mb-4">Customer Service</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-white">Contact Us</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">Track Order</a></li>
                    </ul>
                </div>
                
                <!-- Contact -->
                <div>
                    <h3 class="text-xl font-bold mb-4">Contact Us</h3>
                    <ul class="space-y-2 text-gray-400">
                        <li class="flex items-center">
                            <i class="fas fa-map-marker-alt mr-2"></i> 123 Book Street, Kuala Lumpur, Malaysia
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-phone-alt mr-2"></i> +603-1234 5678
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-envelope mr-2"></i> hello@bookheaven.com
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-clock mr-2"></i> Mon-Fri: 9am-6pm
                        </li>
                    </ul>
                </div>
            </div>
            
            <div class="border-t border-gray-800 pt-6 flex flex-col md:flex-row justify-between items-center">
                <p class="text-gray-400 mb-4 md:mb-0">© 2025 Book Heaven. All rights reserved.</p>
                <div class="flex space-x-6">
                    <a class="text-gray-400 hover:text-white">Privacy Policy</a>
                    <a class="text-gray-400 hover:text-white">Terms of Service</a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Tab functionality
        document.addEventListener('DOMContentLoaded', function() {
            const tabLinks = document.querySelectorAll('.tab-link');
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Remove active class from all tabs
                    tabLinks.forEach(tab => tab.querySelector('a').classList.remove('text-blue-600', 'border-b-2', 'border-blue-600'));
                    tabContents.forEach(content => content.classList.remove('active'));
                    
                    // Add active class to clicked tab
                    this.querySelector('a').classList.add('text-blue-600', 'border-b-2', 'border-blue-600');
                    
                    // Show corresponding content
                    const tabId = this.getAttribute('data-tab');
                    document.getElementById(`${tabId}-tab`).classList.add('active');
                });
            });

            // Initialize charts
            initCharts();
        });

        // Initialize charts
        function initCharts() {
            // Sales Chart - Using PHP data
            const salesCtx = document.getElementById('salesChart').getContext('2d');
            new Chart(salesCtx, {
                type: 'line',
                data: {
                    labels: <?php echo json_encode($sales_labels); ?>,
                    datasets: [{
                        label: 'Daily Sales (RM)',
                        data: <?php echo json_encode($sales_data); ?>,
                        borderColor: '#3b82f6',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                drawBorder: false
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });

            // Category Chart - Using PHP data from database
            const categoryCtx = document.getElementById('categoryChart').getContext('2d');
            new Chart(categoryCtx, {
                type: 'doughnut',
                data: {
                    labels: <?php echo json_encode($category_labels); ?>,
                    datasets: [{
                        data: <?php echo json_encode($category_data); ?>,
                        backgroundColor: ['#3b82f6', '#10b981', '#8b5cf6', '#f59e0b', '#ef4444', '#6b7280']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right'
                        }
                    }
                }
            });
        }

        // Export report function
        function exportReport(format) {
            alert(`Exporting report as ${format.toUpperCase()}...`);
        }

        // Share report function
        function shareReport() {
            alert('Sharing report with team members...');
        }
    </script>
</body>
</html><?php
$conn->close();